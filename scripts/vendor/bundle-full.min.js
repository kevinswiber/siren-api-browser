!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.jsondiffpatch=t()}}(function(){return function t(e,r,n){function i(f,o){if(!r[f]){if(!e[f]){var a="function"==typeof require&&require;if(!o&&a)return a(f,!0);if(s)return s(f,!0);throw new Error("Cannot find module '"+f+"'")}var h=r[f]={exports:{}};e[f][0].call(h.exports,function(t){var r=e[f][1][t];return i(r?r:t)},h,h.exports,t,e,r,n)}return r[f].exports}for(var s="function"==typeof require&&require,f=0;f<n.length;f++)i(n[f]);return i}({1:[function(){function t(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var e=-1,r=1,n=0;t.Diff,t.prototype.diff_main=function(t,e,r,i){"undefined"==typeof i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var s=i;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[n,t]]:[];"undefined"==typeof r&&(r=!0);var f=r,o=this.diff_commonPrefix(t,e),a=t.substring(0,o);t=t.substring(o),e=e.substring(o),o=this.diff_commonSuffix(t,e);var h=t.substring(t.length-o);t=t.substring(0,t.length-o),e=e.substring(0,e.length-o);var l=this.diff_compute_(t,e,f,s);return a&&l.unshift([n,a]),h&&l.push([n,h]),this.diff_cleanupMerge(l),l},t.prototype.diff_compute_=function(t,i,s,f){var o;if(!t)return[[r,i]];if(!i)return[[e,t]];var a=t.length>i.length?t:i,h=t.length>i.length?i:t,l=a.indexOf(h);if(-1!=l)return o=[[r,a.substring(0,l)],[n,h],[r,a.substring(l+h.length)]],t.length>i.length&&(o[0][0]=o[2][0]=e),o;if(1==h.length)return[[e,t],[r,i]];a=h=null;var c=this.diff_halfMatch_(t,i);if(c){var u=c[0],p=c[1],d=c[2],g=c[3],v=c[4],_=this.diff_main(u,d,s,f),y=this.diff_main(p,g,s,f);return _.concat([[n,v]],y)}return s&&t.length>100&&i.length>100?this.diff_lineMode_(t,i,f):this.diff_bisect_(t,i,f)},t.prototype.diff_lineMode_=function(t,i,s){var f=this.diff_linesToChars_(t,i);t=f[0],i=f[1];var o=f[2],a=this.diff_bisect_(t,i,s);this.diff_charsToLines_(a,o),this.diff_cleanupSemantic(a),a.push([n,""]);for(var h=0,l=0,c=0,u="",p="";h<a.length;){switch(a[h][0]){case r:c++,p+=a[h][1];break;case e:l++,u+=a[h][1];break;case n:if(l>=1&&c>=1){var f=this.diff_main(u,p,!1,s);a.splice(h-l-c,l+c),h=h-l-c;for(var d=f.length-1;d>=0;d--)a.splice(h,0,f[d]);h+=f.length}c=0,l=0,u="",p=""}h++}return a.pop(),a},t.prototype.diff_bisect_=function(t,n,i){for(var s=t.length,f=n.length,o=Math.ceil((s+f)/2),a=o,h=2*o,l=new Array(h),c=new Array(h),u=0;h>u;u++)l[u]=-1,c[u]=-1;l[a+1]=0,c[a+1]=0;for(var p=s-f,d=p%2!=0,g=0,v=0,_=0,y=0,m=0;o>m&&!((new Date).getTime()>i);m++){for(var x=-m+g;m-v>=x;x+=2){var b,w=a+x;b=x==-m||x!=m&&l[w-1]<l[w+1]?l[w+1]:l[w-1]+1;for(var M=b-x;s>b&&f>M&&t.charAt(b)==n.charAt(M);)b++,M++;if(l[w]=b,b>s)v+=2;else if(M>f)g+=2;else if(d){var C=a+p-x;if(C>=0&&h>C&&-1!=c[C]){var A=s-c[C];if(b>=A)return this.diff_bisectSplit_(t,n,b,M,i)}}}for(var R=-m+_;m-y>=R;R+=2){var A,C=a+R;A=R==-m||R!=m&&c[C-1]<c[C+1]?c[C+1]:c[C-1]+1;for(var P=A-R;s>A&&f>P&&t.charAt(s-A-1)==n.charAt(f-P-1);)A++,P++;if(c[C]=A,A>s)y+=2;else if(P>f)_+=2;else if(!d){var w=a+p-R;if(w>=0&&h>w&&-1!=l[w]){var b=l[w],M=a+b-w;if(A=s-A,b>=A)return this.diff_bisectSplit_(t,n,b,M,i)}}}}return[[e,t],[r,n]]},t.prototype.diff_bisectSplit_=function(t,e,r,n,i){var s=t.substring(0,r),f=e.substring(0,n),o=t.substring(r),a=e.substring(n),h=this.diff_main(s,f,!1,i),l=this.diff_main(o,a,!1,i);return h.concat(l)},t.prototype.diff_linesToChars_=function(t,e){function r(t){for(var e="",r=0,s=-1,f=n.length;s<t.length-1;){s=t.indexOf("\n",r),-1==s&&(s=t.length-1);var o=t.substring(r,s+1);r=s+1,(i.hasOwnProperty?i.hasOwnProperty(o):void 0!==i[o])?e+=String.fromCharCode(i[o]):(e+=String.fromCharCode(f),i[o]=f,n[f++]=o)}return e}var n=[],i={};n[0]="";var s=r(t),f=r(e);return[s,f,n]},t.prototype.diff_charsToLines_=function(t,e){for(var r=0;r<t.length;r++){for(var n=t[r][1],i=[],s=0;s<n.length;s++)i[s]=e[n.charCodeAt(s)];t[r][1]=i.join("")}},t.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var r=0,n=Math.min(t.length,e.length),i=n,s=0;i>r;)t.substring(s,i)==e.substring(s,i)?(r=i,s=r):n=i,i=Math.floor((n-r)/2+r);return i},t.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var r=0,n=Math.min(t.length,e.length),i=n,s=0;i>r;)t.substring(t.length-i,t.length-s)==e.substring(e.length-i,e.length-s)?(r=i,s=r):n=i,i=Math.floor((n-r)/2+r);return i},t.prototype.diff_commonOverlap_=function(t,e){var r=t.length,n=e.length;if(0==r||0==n)return 0;r>n?t=t.substring(r-n):n>r&&(e=e.substring(0,r));var i=Math.min(r,n);if(t==e)return i;for(var s=0,f=1;;){var o=t.substring(i-f),a=e.indexOf(o);if(-1==a)return s;f+=a,(0==a||t.substring(i-f)==e.substring(0,f))&&(s=f,f++)}},t.prototype.diff_halfMatch_=function(t,e){function r(t,e,r){for(var n,i,s,o,a=t.substring(r,r+Math.floor(t.length/4)),h=-1,l="";-1!=(h=e.indexOf(a,h+1));){var c=f.diff_commonPrefix(t.substring(r),e.substring(h)),u=f.diff_commonSuffix(t.substring(0,r),e.substring(0,h));l.length<u+c&&(l=e.substring(h-u,h)+e.substring(h,h+c),n=t.substring(0,r-u),i=t.substring(r+c),s=e.substring(0,h-u),o=e.substring(h+c))}return 2*l.length>=t.length?[n,i,s,o,l]:null}if(this.Diff_Timeout<=0)return null;var n=t.length>e.length?t:e,i=t.length>e.length?e:t;if(n.length<4||2*i.length<n.length)return null;var s,f=this,o=r(n,i,Math.ceil(n.length/4)),a=r(n,i,Math.ceil(n.length/2));if(!o&&!a)return null;s=a?o?o[4].length>a[4].length?o:a:a:o;var h,l,c,u;t.length>e.length?(h=s[0],l=s[1],c=s[2],u=s[3]):(c=s[0],u=s[1],h=s[2],l=s[3]);var p=s[4];return[h,l,c,u,p]},t.prototype.diff_cleanupSemantic=function(t){for(var i=!1,s=[],f=0,o=null,a=0,h=0,l=0,c=0,u=0;a<t.length;)t[a][0]==n?(s[f++]=a,h=c,l=u,c=0,u=0,o=t[a][1]):(t[a][0]==r?c+=t[a][1].length:u+=t[a][1].length,null!==o&&o.length<=Math.max(h,l)&&o.length<=Math.max(c,u)&&(t.splice(s[f-1],0,[e,o]),t[s[f-1]+1][0]=r,f--,f--,a=f>0?s[f-1]:-1,h=0,l=0,c=0,u=0,o=null,i=!0)),a++;for(i&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),a=1;a<t.length;){if(t[a-1][0]==e&&t[a][0]==r){var p=t[a-1][1],d=t[a][1],g=this.diff_commonOverlap_(p,d);(g>=p.length/2||g>=d.length/2)&&(t.splice(a,0,[n,d.substring(0,g)]),t[a-1][1]=p.substring(0,p.length-g),t[a+1][1]=d.substring(g),a++),a++}a++}},t.prototype.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 5;var n=0;return(t.charAt(t.length-1).match(r)||e.charAt(0).match(r))&&(n++,(t.charAt(t.length-1).match(i)||e.charAt(0).match(i))&&(n++,(t.charAt(t.length-1).match(s)||e.charAt(0).match(s))&&(n++,(t.match(f)||e.match(o))&&n++))),n}for(var r=/[^a-zA-Z0-9]/,i=/\s/,s=/[\r\n]/,f=/\n\r?\n$/,o=/^\r?\n\r?\n/,a=1;a<t.length-1;){if(t[a-1][0]==n&&t[a+1][0]==n){var h=t[a-1][1],l=t[a][1],c=t[a+1][1],u=this.diff_commonSuffix(h,l);if(u){var p=l.substring(l.length-u);h=h.substring(0,h.length-u),l=p+l.substring(0,l.length-u),c=p+c}for(var d=h,g=l,v=c,_=e(h,l)+e(l,c);l.charAt(0)===c.charAt(0);){h+=l.charAt(0),l=l.substring(1)+c.charAt(0),c=c.substring(1);var y=e(h,l)+e(l,c);y>=_&&(_=y,d=h,g=l,v=c)}t[a-1][1]!=d&&(d?t[a-1][1]=d:(t.splice(a-1,1),a--),t[a][1]=g,v?t[a+1][1]=v:(t.splice(a+1,1),a--))}a++}},t.prototype.diff_cleanupEfficiency=function(t){for(var i=!1,s=[],f=0,o="",a=0,h=!1,l=!1,c=!1,u=!1;a<t.length;)t[a][0]==n?(t[a][1].length<this.Diff_EditCost&&(c||u)?(s[f++]=a,h=c,l=u,o=t[a][1]):(f=0,o=""),c=u=!1):(t[a][0]==e?u=!0:c=!0,o&&(h&&l&&c&&u||o.length<this.Diff_EditCost/2&&h+l+c+u==3)&&(t.splice(s[f-1],0,[e,o]),t[s[f-1]+1][0]=r,f--,o="",h&&l?(c=u=!0,f=0):(f--,a=f>0?s[f-1]:-1,c=u=!1),i=!0)),a++;i&&this.diff_cleanupMerge(t)},t.prototype.diff_cleanupMerge=function(t){t.push([n,""]);for(var i,s=0,f=0,o=0,a="",h="";s<t.length;)switch(t[s][0]){case r:o++,h+=t[s][1],s++;break;case e:f++,a+=t[s][1],s++;break;case n:f+o>1?(0!==f&&0!==o&&(i=this.diff_commonPrefix(h,a),0!==i&&(s-f-o>0&&t[s-f-o-1][0]==n?t[s-f-o-1][1]+=h.substring(0,i):(t.splice(0,0,[n,h.substring(0,i)]),s++),h=h.substring(i),a=a.substring(i)),i=this.diff_commonSuffix(h,a),0!==i&&(t[s][1]=h.substring(h.length-i)+t[s][1],h=h.substring(0,h.length-i),a=a.substring(0,a.length-i))),0===f?t.splice(s-f-o,f+o,[r,h]):0===o?t.splice(s-f-o,f+o,[e,a]):t.splice(s-f-o,f+o,[e,a],[r,h]),s=s-f-o+(f?1:0)+(o?1:0)+1):0!==s&&t[s-1][0]==n?(t[s-1][1]+=t[s][1],t.splice(s,1)):s++,o=0,f=0,a="",h=""}""===t[t.length-1][1]&&t.pop();var l=!1;for(s=1;s<t.length-1;)t[s-1][0]==n&&t[s+1][0]==n&&(t[s][1].substring(t[s][1].length-t[s-1][1].length)==t[s-1][1]?(t[s][1]=t[s-1][1]+t[s][1].substring(0,t[s][1].length-t[s-1][1].length),t[s+1][1]=t[s-1][1]+t[s+1][1],t.splice(s-1,1),l=!0):t[s][1].substring(0,t[s+1][1].length)==t[s+1][1]&&(t[s-1][1]+=t[s+1][1],t[s][1]=t[s][1].substring(t[s+1][1].length)+t[s+1][1],t.splice(s+1,1),l=!0)),s++;l&&this.diff_cleanupMerge(t)},t.prototype.diff_xIndex=function(t,n){var i,s=0,f=0,o=0,a=0;for(i=0;i<t.length&&(t[i][0]!==r&&(s+=t[i][1].length),t[i][0]!==e&&(f+=t[i][1].length),!(s>n));i++)o=s,a=f;return t.length!=i&&t[i][0]===e?a:a+(n-o)},t.prototype.diff_prettyHtml=function(t){for(var i=[],s=0,f=/&/g,o=/</g,a=/>/g,h=/\n/g,l=0;l<t.length;l++){var c=t[l][0],u=t[l][1],p=u.replace(f,"&amp;").replace(o,"&lt;").replace(a,"&gt;").replace(h,"&para;<br>");switch(c){case r:i[l]='<ins style="background:#e6ffe6;">'+p+"</ins>";break;case e:i[l]='<del style="background:#ffe6e6;">'+p+"</del>";break;case n:i[l]="<span>"+p+"</span>"}c!==e&&(s+=u.length)}return i.join("")},t.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==r&&(e[n]=t[n][1]);return e.join("")},t.prototype.diff_text2=function(t){for(var r=[],n=0;n<t.length;n++)t[n][0]!==e&&(r[n]=t[n][1]);return r.join("")},t.prototype.diff_levenshtein=function(t){for(var i=0,s=0,f=0,o=0;o<t.length;o++){var a=t[o][0],h=t[o][1];switch(a){case r:s+=h.length;break;case e:f+=h.length;break;case n:i+=Math.max(s,f),s=0,f=0}}return i+=Math.max(s,f)},t.prototype.diff_toDelta=function(t){for(var i=[],s=0;s<t.length;s++)switch(t[s][0]){case r:i[s]="+"+encodeURI(t[s][1]);break;case e:i[s]="-"+t[s][1].length;break;case n:i[s]="="+t[s][1].length}return i.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(t,i){for(var s=[],f=0,o=0,a=i.split(/\t/g),h=0;h<a.length;h++){var l=a[h].substring(1);switch(a[h].charAt(0)){case"+":try{s[f++]=[r,decodeURI(l)]}catch(c){throw new Error("Illegal escape in diff_fromDelta: "+l)}break;case"-":case"=":var u=parseInt(l,10);if(isNaN(u)||0>u)throw new Error("Invalid number in diff_fromDelta: "+l);var p=t.substring(o,o+=u);s[f++]="="==a[h].charAt(0)?[n,p]:[e,p];break;default:if(a[h])throw new Error("Invalid diff operation in diff_fromDelta: "+a[h])}}if(o!=t.length)throw new Error("Delta length ("+o+") does not equal source text length ("+t.length+").");return s},t.prototype.match_main=function(t,e,r){if(null==t||null==e||null==r)throw new Error("Null input. (match_main)");return r=Math.max(0,Math.min(r,t.length)),t==e?0:t.length?t.substring(r,r+e.length)==e?r:this.match_bitap_(t,e,r):-1},t.prototype.match_bitap_=function(t,e,r){function n(t,n){var i=t/e.length,f=Math.abs(r-n);return s.Match_Distance?i+f/s.Match_Distance:f?1:i}if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(e),s=this,f=this.Match_Threshold,o=t.indexOf(e,r);-1!=o&&(f=Math.min(n(0,o),f),o=t.lastIndexOf(e,r+e.length),-1!=o&&(f=Math.min(n(0,o),f)));var a=1<<e.length-1;o=-1;for(var h,l,c,u=e.length+t.length,p=0;p<e.length;p++){for(h=0,l=u;l>h;)n(p,r+l)<=f?h=l:u=l,l=Math.floor((u-h)/2+h);u=l;var d=Math.max(1,r-l+1),g=Math.min(r+l,t.length)+e.length,v=Array(g+2);v[g+1]=(1<<p)-1;for(var _=g;_>=d;_--){var y=i[t.charAt(_-1)];if(v[_]=0===p?(v[_+1]<<1|1)&y:(v[_+1]<<1|1)&y|((c[_+1]|c[_])<<1|1)|c[_+1],v[_]&a){var m=n(p,_-1);if(f>=m){if(f=m,o=_-1,!(o>r))break;d=Math.max(1,2*r-o)}}}if(n(p+1,r)>f)break;c=v}return o},t.prototype.match_alphabet_=function(t){for(var e={},r=0;r<t.length;r++)e[t.charAt(r)]=0;for(var r=0;r<t.length;r++)e[t.charAt(r)]|=1<<t.length-r-1;return e},t.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var r=e.substring(t.start2,t.start2+t.length1),i=0;e.indexOf(r)!=e.lastIndexOf(r)&&r.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,r=e.substring(t.start2-i,t.start2+t.length1+i);i+=this.Patch_Margin;var s=e.substring(t.start2-i,t.start2);s&&t.diffs.unshift([n,s]);var f=e.substring(t.start2+t.length1,t.start2+t.length1+i);f&&t.diffs.push([n,f]),t.start1-=s.length,t.start2-=s.length,t.length1+=s.length+f.length,t.length2+=s.length+f.length}},t.prototype.patch_make=function(i,s,f){var o,a;if("string"==typeof i&&"string"==typeof s&&"undefined"==typeof f)o=i,a=this.diff_main(o,s,!0),a.length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(i&&"object"==typeof i&&"undefined"==typeof s&&"undefined"==typeof f)a=i,o=this.diff_text1(a);else if("string"==typeof i&&s&&"object"==typeof s&&"undefined"==typeof f)o=i,a=s;else{if("string"!=typeof i||"string"!=typeof s||!f||"object"!=typeof f)throw new Error("Unknown call format to patch_make.");o=i,a=f}if(0===a.length)return[];for(var h=[],l=new t.patch_obj,c=0,u=0,p=0,d=o,g=o,v=0;v<a.length;v++){var _=a[v][0],y=a[v][1];switch(c||_===n||(l.start1=u,l.start2=p),_){case r:l.diffs[c++]=a[v],l.length2+=y.length,g=g.substring(0,p)+y+g.substring(p);break;case e:l.length1+=y.length,l.diffs[c++]=a[v],g=g.substring(0,p)+g.substring(p+y.length);break;case n:y.length<=2*this.Patch_Margin&&c&&a.length!=v+1?(l.diffs[c++]=a[v],l.length1+=y.length,l.length2+=y.length):y.length>=2*this.Patch_Margin&&c&&(this.patch_addContext_(l,d),h.push(l),l=new t.patch_obj,c=0,d=g,u=p)}_!==r&&(u+=y.length),_!==e&&(p+=y.length)}return c&&(this.patch_addContext_(l,d),h.push(l)),h},t.prototype.patch_deepCopy=function(e){for(var r=[],n=0;n<e.length;n++){var i=e[n],s=new t.patch_obj;s.diffs=[];for(var f=0;f<i.diffs.length;f++)s.diffs[f]=i.diffs[f].slice();s.start1=i.start1,s.start2=i.start2,s.length1=i.length1,s.length2=i.length2,r[n]=s}return r},t.prototype.patch_apply=function(t,i){if(0==t.length)return[i,[]];t=this.patch_deepCopy(t);var s=this.patch_addPadding(t);i=s+i+s,this.patch_splitMax(t);for(var f=0,o=[],a=0;a<t.length;a++){var h,l=t[a].start2+f,c=this.diff_text1(t[a].diffs),u=-1;if(c.length>this.Match_MaxBits?(h=this.match_main(i,c.substring(0,this.Match_MaxBits),l),-1!=h&&(u=this.match_main(i,c.substring(c.length-this.Match_MaxBits),l+c.length-this.Match_MaxBits),(-1==u||h>=u)&&(h=-1))):h=this.match_main(i,c,l),-1==h)o[a]=!1,f-=t[a].length2-t[a].length1;else{o[a]=!0,f=h-l;var p;if(p=-1==u?i.substring(h,h+c.length):i.substring(h,u+this.Match_MaxBits),c==p)i=i.substring(0,h)+this.diff_text2(t[a].diffs)+i.substring(h+c.length);else{var d=this.diff_main(c,p,!1);if(c.length>this.Match_MaxBits&&this.diff_levenshtein(d)/c.length>this.Patch_DeleteThreshold)o[a]=!1;else{this.diff_cleanupSemanticLossless(d);for(var g,v=0,_=0;_<t[a].diffs.length;_++){var y=t[a].diffs[_];y[0]!==n&&(g=this.diff_xIndex(d,v)),y[0]===r?i=i.substring(0,h+g)+y[1]+i.substring(h+g):y[0]===e&&(i=i.substring(0,h+g)+i.substring(h+this.diff_xIndex(d,v+y[1].length))),y[0]!==e&&(v+=y[1].length)}}}}}return i=i.substring(s.length,i.length-s.length),[i,o]},t.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,r="",i=1;e>=i;i++)r+=String.fromCharCode(i);for(var i=0;i<t.length;i++)t[i].start1+=e,t[i].start2+=e;var s=t[0],f=s.diffs;if(0==f.length||f[0][0]!=n)f.unshift([n,r]),s.start1-=e,s.start2-=e,s.length1+=e,s.length2+=e;else if(e>f[0][1].length){var o=e-f[0][1].length;f[0][1]=r.substring(f[0][1].length)+f[0][1],s.start1-=o,s.start2-=o,s.length1+=o,s.length2+=o}if(s=t[t.length-1],f=s.diffs,0==f.length||f[f.length-1][0]!=n)f.push([n,r]),s.length1+=e,s.length2+=e;else if(e>f[f.length-1][1].length){var o=e-f[f.length-1][1].length;f[f.length-1][1]+=r.substring(0,o),s.length1+=o,s.length2+=o}return r},t.prototype.patch_splitMax=function(i){for(var s=this.Match_MaxBits,f=0;f<i.length;f++)if(i[f].length1>s){var o=i[f];i.splice(f--,1);for(var a=o.start1,h=o.start2,l="";0!==o.diffs.length;){var c=new t.patch_obj,u=!0;for(c.start1=a-l.length,c.start2=h-l.length,""!==l&&(c.length1=c.length2=l.length,c.diffs.push([n,l]));0!==o.diffs.length&&c.length1<s-this.Patch_Margin;){var p=o.diffs[0][0],d=o.diffs[0][1];p===r?(c.length2+=d.length,h+=d.length,c.diffs.push(o.diffs.shift()),u=!1):p===e&&1==c.diffs.length&&c.diffs[0][0]==n&&d.length>2*s?(c.length1+=d.length,a+=d.length,u=!1,c.diffs.push([p,d]),o.diffs.shift()):(d=d.substring(0,s-c.length1-this.Patch_Margin),c.length1+=d.length,a+=d.length,p===n?(c.length2+=d.length,h+=d.length):u=!1,c.diffs.push([p,d]),d==o.diffs[0][1]?o.diffs.shift():o.diffs[0][1]=o.diffs[0][1].substring(d.length))}l=this.diff_text2(c.diffs),l=l.substring(l.length-this.Patch_Margin);var g=this.diff_text1(o.diffs).substring(0,this.Patch_Margin);""!==g&&(c.length1+=g.length,c.length2+=g.length,0!==c.diffs.length&&c.diffs[c.diffs.length-1][0]===n?c.diffs[c.diffs.length-1][1]+=g:c.diffs.push([n,g])),u||i.splice(++f,0,c)}}},t.prototype.patch_toText=function(t){for(var e=[],r=0;r<t.length;r++)e[r]=t[r];return e.join("")},t.prototype.patch_fromText=function(i){var s=[];if(!i)return s;for(var f=i.split("\n"),o=0,a=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;o<f.length;){var h=f[o].match(a);if(!h)throw new Error("Invalid patch string: "+f[o]);var l=new t.patch_obj;for(s.push(l),l.start1=parseInt(h[1],10),""===h[2]?(l.start1--,l.length1=1):"0"==h[2]?l.length1=0:(l.start1--,l.length1=parseInt(h[2],10)),l.start2=parseInt(h[3],10),""===h[4]?(l.start2--,l.length2=1):"0"==h[4]?l.length2=0:(l.start2--,l.length2=parseInt(h[4],10)),o++;o<f.length;){var c=f[o].charAt(0);try{var u=decodeURI(f[o].substring(1))}catch(p){throw new Error("Illegal escape in patch_fromText: "+u)}if("-"==c)l.diffs.push([e,u]);else if("+"==c)l.diffs.push([r,u]);else if(" "==c)l.diffs.push([n,u]);else{if("@"==c)break;if(""!==c)throw new Error('Invalid patch mode "'+c+'" in: '+u)}o++}}return s},t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},t.patch_obj.prototype.toString=function(){var t,i;t=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,i=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var s,f=["@@ -"+t+" +"+i+" @@\n"],o=0;o<this.diffs.length;o++){switch(this.diffs[o][0]){case r:s="+";break;case e:s="-";break;case n:s=" "}f[o+1]=s+encodeURI(this.diffs[o][1])+"\n"}return f.join("").replace(/%20/g," ")},this.diff_match_patch=t,this.DIFF_DELETE=e,this.DIFF_INSERT=r,this.DIFF_EQUAL=n},{}],2:[function(t,e){var r=e.exports={};r.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var r=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(t){r.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},{}],3:[function(t,e,r){var n=t("../pipe").Pipe,i=function(){};i.prototype.setResult=function(t){return this.result=t,this.hasResult=!0,this},i.prototype.exit=function(){return this.exiting=!0,this},i.prototype.switchTo=function(t,e){return"string"==typeof t||t instanceof n?this.nextPipe=t:(this.next=t,e&&(this.nextPipe=e)),this},i.prototype.push=function(t,e){return t.parent=this,"undefined"!=typeof e&&(t.childName=e),t.root=this.root||this,t.options=t.options||this.options,this.children?(this.children[this.children.length-1].next=t,this.children.push(t)):(this.children=[t],this.nextAfterChildren=this.next||null,this.next=t),t.next=this,this},r.Context=i},{"../pipe":16}],4:[function(t,e,r){var n=t("./context").Context,i=function(t,e){this.left=t,this.right=e,this.pipe="diff"};i.prototype=new n,r.DiffContext=i},{"./context":3}],5:[function(t,e,r){var n=t("./context").Context,i=function(t,e){this.left=t,this.delta=e,this.pipe="patch"};i.prototype=new n,r.PatchContext=i},{"./context":3}],6:[function(t,e,r){var n=t("./context").Context,i=function(t){this.delta=t,this.pipe="reverse"};i.prototype=new n,r.ReverseContext=i},{"./context":3}],7:[function(t,e){e.exports=function(t,e){var r;return"string"==typeof e&&(r=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)(Z|([+\-])(\d{2}):(\d{2}))$/.exec(e))?new Date(Date.UTC(+r[1],+r[2]-1,+r[3],+r[4],+r[5],+r[6])):e}},{}],8:[function(t,e,r){var n=t("./processor").Processor,i=t("./pipe").Pipe,s=t("./contexts/diff").DiffContext,f=t("./contexts/patch").PatchContext,o=t("./contexts/reverse").ReverseContext,a=t("./filters/trivial"),h=t("./filters/nested"),l=t("./filters/arrays"),c=t("./filters/dates"),u=t("./filters/texts"),p=function(t){this.processor=new n(t),this.processor.pipe(new i("diff").append(h.collectChildrenDiffFilter,a.diffFilter,c.diffFilter,u.diffFilter,h.objectsDiffFilter,l.diffFilter).shouldHaveResult()),this.processor.pipe(new i("patch").append(h.collectChildrenPatchFilter,l.collectChildrenPatchFilter,a.patchFilter,u.patchFilter,h.patchFilter,l.patchFilter).shouldHaveResult()),this.processor.pipe(new i("reverse").append(h.collectChildrenReverseFilter,l.collectChildrenReverseFilter,a.reverseFilter,u.reverseFilter,h.reverseFilter,l.reverseFilter).shouldHaveResult())};p.prototype.options=function(){return this.processor.options.apply(this.processor,arguments)},p.prototype.diff=function(t,e){return this.processor.process(new s(t,e))},p.prototype.patch=function(t,e){return this.processor.process(new f(t,e))},p.prototype.reverse=function(t){return this.processor.process(new o(t))},p.prototype.unpatch=function(t,e){return this.patch(t,this.reverse(e))},r.DiffPatcher=p},{"./contexts/diff":4,"./contexts/patch":5,"./contexts/reverse":6,"./filters/arrays":10,"./filters/dates":11,"./filters/nested":13,"./filters/texts":14,"./filters/trivial":15,"./pipe":16,"./processor":17}],9:[function(t,e,r){(function(e){var n=t("./diffpatcher").DiffPatcher;r.DiffPatcher=n,r.create=function(t){return new n(t)},r.dateReviver=t("./date-reviver");var i;r.diff=function(){return i||(i=new n),i.diff.apply(i,arguments)},r.patch=function(){return i||(i=new n),i.patch.apply(i,arguments)},r.unpatch=function(){return i||(i=new n),i.unpatch.apply(i,arguments)},r.reverse=function(){return i||(i=new n),i.reverse.apply(i,arguments)};var s="undefined"!=typeof e&&"string"==typeof e.execPath;if(s){var f=t("./formatters/index");r.formatters=f,r.console=f.console}else r.homepage="https://github.com/benjamine/jsondiffpatch",r.version="0.1.5"}).call(this,t("/home/sheila/proj/JsonDiffPatch/node_modules/gulp-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"./date-reviver":7,"./diffpatcher":8,"/home/sheila/proj/JsonDiffPatch/node_modules/gulp-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":2}],10:[function(t,e,r){var n=t("../contexts/diff").DiffContext,i=t("../contexts/patch").PatchContext,s=t("../contexts/reverse").ReverseContext,f=t("./lcs"),o=3,a="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array},h="function"==typeof Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var r=t.length,n=0;r>n;n++)if(t[n]===e)return n;return-1},l=function(t){if(t.leftIsArray){for(var e,r,i,s,a=t.options&&t.options.objectHash,l=function(t,e,r,n,i){var s=t[r],f=e[n];if(s===f)return!0;if("object"!=typeof s||"object"!=typeof f)return!1;if(!a)return!1;var o,h;return"number"==typeof r?(i.hashCache1=i.hashCache1||[],o=i.hashCache1[r],"undefined"==typeof o&&(i.hashCache1[r]=o=a(s,r))):o=a(s),"undefined"==typeof o?!1:("number"==typeof n?(i.hashCache2=i.hashCache2||[],h=i.hashCache2[n],"undefined"==typeof h&&(i.hashCache2[n]=h=a(f,n))):h=a(f),"undefined"==typeof h?!1:o===h)},c={},u=0,p=0,d=t.left,g=t.right,v=d.length,_=g.length;v>u&&_>u&&l(d,g,u,u,c);)e=u,s=new n(t.left[e],t.right[e]),t.push(s,e),u++;for(;v>p+u&&_>p+u&&l(d,g,v-1-p,_-1-p,c);)r=v-1-p,i=_-1-p,s=new n(t.left[r],t.right[i]),t.push(s,i),p++;var y;if(u+p===v){if(v===_)return void t.setResult(void 0).exit();for(y=y||{_t:"a"},e=u;_-p>e;e++)y[e]=[g[e]];return void t.setResult(y).exit()}if(u+p===_){for(y=y||{_t:"a"},e=u;v-p>e;e++)y["_"+e]=[d[e],0,0];return void t.setResult(y).exit()}c={};var m=d.slice(u,v-p),x=g.slice(u,_-p),b=f.get(m,x,l,c),w=[];for(y=y||{_t:"a"},e=u;v-p>e;e++)h(b.indices1,e-u)<0&&(y["_"+e]=[d[e],0,0],w.push(e));var M=!0;t.options&&t.options.arrays&&t.options.arrays.detectMove===!1&&(M=!1);var C=!1;t.options&&t.options.arrays&&t.options.arrays.includeValueOnMove&&(C=!0);var A=w.length;for(e=u;_-p>e;e++){var R=h(b.indices2,e-u);if(0>R){var P=!1;if(M&&A>0)for(r=0;A>r;r++)if(l(m,x,w[r]-u,e-u,c)){y["_"+w[r]].splice(1,2,e,o),C||(y["_"+w[r]][0]=""),r=w[r],i=e,s=new n(t.left[r],t.right[i]),t.push(s,i),w.splice(r,1),P=!0;break}P||(y[e]=[g[e]])}else r=b.indices1[R]+u,i=b.indices2[R]+u,s=new n(t.left[r],t.right[i]),t.push(s,i)}t.setResult(y).exit()}};l.filterName="arrays";var c={numerically:function(t,e){return t-e},numericallyBy:function(t){return function(e,r){return e[t]-r[t]}}},u=function(t){if(t.nested&&"a"===t.delta._t){var e,r,n=t.delta,s=t.left,f=[],a=[],h=[];for(e in n)if("_t"!==e)if("_"===e[0]){if(0!==n[e][2]&&n[e][2]!==o)throw new Error("only removal or move can be applied at original array indices, invalid diff type: "+n[e][2]);f.push(parseInt(e.slice(1),10))}else 1===n[e].length?a.push({index:parseInt(e,10),value:n[e][0]}):h.push({index:parseInt(e,10),delta:n[e]});for(f=f.sort(c.numerically),e=f.length-1;e>=0;e--){r=f[e];var l=n["_"+r],u=s.splice(r,1)[0];l[2]===o&&a.push({index:l[1],value:u})}a=a.sort(c.numericallyBy("index"));var p=a.length;for(e=0;p>e;e++){var d=a[e];s.splice(d.index,0,d.value)}var g,v=h.length;if(v>0)for(e=0;v>e;e++){var _=h[e];g=new i(t.left[_.index],_.delta),t.push(g,_.index)}return t.children?void t.exit():void t.setResult(t.left).exit()}};u.filterName="arrays";var p=function(t){if(t&&t.children&&"a"===t.delta._t){for(var e,r=t.children.length,n=0;r>n;n++)e=t.children[n],t.left[e.childName]=e.result;t.setResult(t.left).exit()}};p.filterName="arraysCollectChildren";var d=function(t){if(!t.nested)return void(t.delta[2]===o&&(t.newName="_"+t.delta[1],t.setResult([t.delta[0],parseInt(t.childName.substr(1),10),o]).exit()));if("a"===t.delta._t){var e,r;for(e in t.delta)"_t"!==e&&(r=new s(t.delta[e]),t.push(r,e));t.exit()}};d.filterName="arrays";var g=function(t,e,r){var n=e;if("string"==typeof e&&"_"===e[0])n=parseInt(e.substr(1),10);else{var i="_"+e;if(a(r)&&0===r[2])n=i;else for(var s in t){var f=t[s];a(f)&&f[2]===o&&f[1].toString()===e&&(n=s.substr(1))}}return n},v=function(t){if(t&&t.children&&"a"===t.delta._t){for(var e,r=t.children.length,n={_t:"a"},i=0;r>i;i++){e=t.children[i];var s=e.newName;"undefined"==typeof s&&(s=g(t.delta,e.childName,e.result)),n[s]!==e.result&&(n[s]=e.result)}t.setResult(n).exit()}};v.filterName="arraysCollectChildren",r.diffFilter=l,r.patchFilter=u,r.collectChildrenPatchFilter=p,r.reverseFilter=d,r.collectChildrenReverseFilter=v},{"../contexts/diff":4,"../contexts/patch":5,"../contexts/reverse":6,"./lcs":12}],11:[function(t,e,r){var n=function(t){t.left instanceof Date?(t.setResult(t.right instanceof Date?t.left.getTime()!==t.right.getTime()?[t.left,t.right]:void 0:[t.left,t.right]),t.exit()):t.right instanceof Date&&t.setResult([t.left,t.right]).exit()};n.filterName="dates",r.diffFilter=n},{}],12:[function(t,e,r){var n=function(t,e,r,n){return t[r]===e[n]},i=function(t,e,r,n){var i,s,f=t.length,o=e.length,a=[f+1];for(i=0;f+1>i;i++)for(a[i]=[o+1],s=0;o+1>s;s++)a[i][s]=0;for(a.match=r,i=1;f+1>i;i++)for(s=1;o+1>s;s++)a[i][s]=r(t,e,i-1,s-1,n)?a[i-1][s-1]+1:Math.max(a[i-1][s],a[i][s-1]);return a},s=function(t,e,r,n,i,f){if(0===n||0===i)return{sequence:[],indices1:[],indices2:[]};if(t.match(e,r,n-1,i-1,f)){var o=s(t,e,r,n-1,i-1,f);return o.sequence.push(e[n-1]),o.indices1.push(n-1),o.indices2.push(i-1),o}return t[n][i-1]>t[n-1][i]?s(t,e,r,n,i-1,f):s(t,e,r,n-1,i,f)},f=function(t,e,r,f){f=f||{};var o=i(t,e,r||n,f),a=s(o,t,e,t.length,e.length,f);return"string"==typeof t&&"string"==typeof e&&(a.sequence=a.sequence.join("")),a};r.get=f},{}],13:[function(t,e,r){var n=t("../contexts/diff").DiffContext,i=t("../contexts/patch").PatchContext,s=t("../contexts/reverse").ReverseContext,f=function(t){if(t&&t.children){for(var e,r=t.children.length,n=t.result,i=0;r>i;i++)e=t.children[i],"undefined"!=typeof e.result&&(n=n||{},n[e.childName]=e.result);n&&t.leftIsArray&&(n._t="a"),t.setResult(n).exit()}};f.filterName="collectChildren";var o=function(t){if(!t.leftIsArray&&"object"===t.leftType){var e,r;for(e in t.left)r=new n(t.left[e],t.right[e]),t.push(r,e);for(e in t.right)"undefined"==typeof t.left[e]&&(r=new n(void 0,t.right[e]),t.push(r,e));return t.children&&0!==t.children.length?void t.exit():void t.setResult(void 0).exit()}};o.filterName="objects";var a=function(t){if(t.nested&&!t.delta._t){var e,r;for(e in t.delta)r=new i(t.left[e],t.delta[e]),t.push(r,e);t.exit()}};a.filterName="objects";var h=function(t){if(t&&t.children&&!t.delta._t){for(var e,r=t.children.length,n=0;r>n;n++)e=t.children[n],t.left[e.childName]!==e.result&&(t.left[e.childName]=e.result);t.setResult(t.left).exit()}};h.filterName="collectChildren";var l=function(t){if(t.nested&&!t.delta._t){var e,r;for(e in t.delta)r=new s(t.delta[e]),t.push(r,e);t.exit()}};l.filterName="objects";var c=function(t){if(t&&t.children&&!t.delta._t){for(var e,r=t.children.length,n={},i=0;r>i;i++)e=t.children[i],n[e.childName]!==e.result&&(n[e.childName]=e.result);t.setResult(n).exit()}};c.filterName="collectChildren",r.collectChildrenDiffFilter=f,r.objectsDiffFilter=o,r.patchFilter=a,r.collectChildrenPatchFilter=h,r.reverseFilter=l,r.collectChildrenReverseFilter=c},{"../contexts/diff":4,"../contexts/patch":5,"../contexts/reverse":6}],14:[function(t,e,r){var n=2,i=60,s=null,f=function(){if(!s){var e;if("undefined"!=typeof diff_match_patch)e=new diff_match_patch;else if("function"==typeof t){var r=t("../../external/diff_match_patch_uncompressed");e=new r.diff_match_patch}if(!e){var n=new Error("text diff_match_patch library not found");throw n.diff_match_patch_not_found=!0,n}s={diff:function(t,r){return e.patch_toText(e.patch_make(t,r))},patch:function(t,r){for(var n=e.patch_apply(e.patch_fromText(r),t),i=0;i<n[1].length;i++)if(!n[1][i]){var s=new Error("text patch failed");s.textPatchFailed=!0}return n[0]}}}return s},o=function(t){if("string"===t.leftType){var e=t.options&&t.options.textDiff&&t.options.textDiff.minLength||i;if(t.left.length<e||t.right.length<e)return void t.setResult([t.left,t.right]).exit();var r=f().diff;t.setResult([r(t.left,t.right),0,n]).exit()}};o.filterName="texts";var a=function(t){if(!t.nested&&t.delta[2]===n){var e=f().patch;t.setResult(e(t.left,t.delta[0])).exit()}};a.filterName="texts";var h=function(t){var e,r,n,i,s,f,o,a,h=null,l=/^@@ +\-(\d+),(\d+) +\+(\d+),(\d+) +@@$/;for(n=t.split("\n"),e=0,r=n.length;r>e;e++){i=n[e];var c=i.slice(0,1);"@"===c?(h=l.exec(i),f=e,o=null,a=null,n[f]="@@ -"+h[3]+","+h[4]+" +"+h[1]+","+h[2]+" @@"):"+"===c?(o=e,n[e]="-"+n[e].slice(1),"+"===n[e-1].slice(0,1)&&(s=n[e],n[e]=n[e-1],n[e-1]=s)):"-"===c&&(a=e,n[e]="+"+n[e].slice(1))}return n.join("\n")},l=function(t){t.nested||t.delta[2]===n&&t.setResult([h(t.delta[0]),0,n]).exit()};l.filterName="texts",r.diffFilter=o,r.patchFilter=a,r.reverseFilter=l},{"../../external/diff_match_patch_uncompressed":1}],15:[function(t,e,r){var n="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array
},i=function(t){if(t.left===t.right)return void t.setResult(void 0).exit();if("undefined"==typeof t.left){if("function"==typeof t.right)throw new Error("functions are not supported");return void t.setResult([t.right]).exit()}if("undefined"==typeof t.right)return void t.setResult([t.left,0,0]).exit();if("function"==typeof t.left||"function"==typeof t.right)throw new Error("functions are not supported");return t.leftType=null===t.left?"null":typeof t.left,t.rightType=null===t.right?"null":typeof t.right,t.leftType!==t.rightType?void t.setResult([t.left,t.right]).exit():"boolean"===t.leftType||"number"===t.leftType?void t.setResult([t.left,t.right]).exit():("object"===t.leftType&&(t.leftIsArray=n(t.left)),"object"===t.rightType&&(t.rightIsArray=n(t.right)),t.leftIsArray!==t.rightIsArray?void t.setResult([t.left,t.right]).exit():void 0)};i.filterName="trivial";var s=function(t){return"undefined"==typeof t.delta?void t.setResult(t.left).exit():(t.nested=!n(t.delta),t.nested?void 0:1===t.delta.length?void t.setResult(t.delta[0]).exit():2===t.delta.length?void t.setResult(t.delta[1]).exit():3===t.delta.length&&0===t.delta[2]?void t.setResult(void 0).exit():void 0)};s.filterName="trivial";var f=function(t){return"undefined"==typeof t.delta?void t.setResult(t.delta).exit():(t.nested=!n(t.delta),t.nested?void 0:1===t.delta.length?void t.setResult([t.delta[0],0,0]).exit():2===t.delta.length?void t.setResult([t.delta[1],t.delta[0]]).exit():3===t.delta.length&&0===t.delta[2]?void t.setResult([t.delta[0]]).exit():void 0)};f.filterName="trivial",r.diffFilter=i,r.patchFilter=s,r.reverseFilter=f},{}],16:[function(t,e,r){var n=function(t){this.name=t,this.filters=[]};n.prototype.process=function(t){if(!this.processor)throw new Error("add this pipe to a processor before using it");for(var e=this.debug,r=this.filters.length,n=t,i=0;r>i;i++){var s=this.filters[i];if(e&&this.log("filter: "+s.filterName),s(n),"object"==typeof n&&n.exiting){n.exiting=!1;break}}!n.next&&this.resultCheck&&this.resultCheck(n)},n.prototype.log=function(t){console.log("[jsondiffpatch] "+this.name+" pipe, "+t)},n.prototype.append=function(){return this.filters.push.apply(this.filters,arguments),this},n.prototype.prepend=function(){return this.filters.unshift.apply(this.filters,arguments),this},n.prototype.indexOf=function(t){if(!t)throw new Error("a filter name is required");for(var e=0;e<this.filters.length;e++){var r=this.filters[e];if(r.filterName===t)return e}throw new Error("filter not found: "+t)},n.prototype.list=function(){for(var t=[],e=0;e<this.filters.length;e++){var r=this.filters[e];t.push(r.filterName)}return t},n.prototype.after=function(t){var e=this.indexOf(t),r=Array.prototype.slice.call(arguments,1);if(!r.length)throw new Error("a filter is required");return r.unshift(e+1,0),Array.prototype.splice.apply(this.filters,r),this},n.prototype.before=function(t){var e=this.indexOf(t),r=Array.prototype.slice.call(arguments,1);if(!r.length)throw new Error("a filter is required");return r.unshift(e,0),Array.prototype.splice.apply(this.filters,r),this},n.prototype.clear=function(){return this.filters.length=0,this},n.prototype.shouldHaveResult=function(t){if(t===!1)return void(this.resultCheck=null);if(!this.resultCheck){var e=this;return this.resultCheck=function(t){if(!t.hasResult){console.log(t);var r=new Error(e.name+" failed");throw r.noResult=!0,r}},this}},r.Pipe=n},{}],17:[function(t,e,r){var n=function(t){this.selfOptions=t,this.pipes={}};n.prototype.options=function(t){return t&&(this.selfOptions=t),this.selfOptions},n.prototype.pipe=function(t,e){if("string"==typeof t){if("undefined"==typeof e)return this.pipes[t];this.pipes[t]=e}if(t&&t.name){if(e=t,e.processor===this)return e;this.pipes[e.name]=e}return e.processor=this,e},n.prototype.process=function(t,e){var r=t;r.options=this.options();for(var n,i,s=e||t.pipe||"default";s;)"undefined"!=typeof r.nextAfterChildren&&(r.next=r.nextAfterChildren,r.nextAfterChildren=null),"string"==typeof s&&(s=this.pipe(s)),s.process(r),i=r,n=s,s=null,r&&r.next&&(r=r.next,s=i.nextPipe||r.pipe||n);return r.hasResult?r.result:void 0},r.Processor=n},{}]},{},[9])(9)});